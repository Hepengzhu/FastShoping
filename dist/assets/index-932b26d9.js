import{$ as Re,a0 as he,a1 as Fe,v as Y,a2 as le,H as z,S as re,I as j,r as h,z as R,a3 as M,B as ge,a as L,c as D,J as ye,i as O,Q as Ie,R as Ne,G,a4 as Le,a5 as ze,y as H,o as W,a6 as Ve,b,L as K,M as De,P as Me,a7 as He,a8 as q,a9 as Ue,D as Ke,aa as qe,k as Te,W as ue,E as We,x as Ye,ab as je,ac as de,U as Ge,V as Xe,n as Ee,N as Je,O as Qe,X as Ze,Y as et,ad as tt,_ as at,q as st,f as be,w as V,F as nt,d as ot,h as ae,t as fe,e as lt}from"./index-67d3d504.js";import{E as rt,a as it}from"./breadcrumb-item-a7a9be61.js";import{a as ct,b as ve}from"./category-6f4860dc.js";import{u as ut,t as me,_ as dt}from"./GoodsItem-cf146131.js";const pe=e=>{let t=0,a=e;for(;a;)t+=a.offsetTop,a=a.offsetParent;return t},bt=(e,t)=>Math.abs(pe(e)-pe(t)),A=e=>Re(e);class ft extends Error{constructor(t){super(t),this.name="ElementPlusError"}}function X(e,t){throw new ft(`[${e}] ${t}`)}const vt=(e,t)=>{if(!he)return!1;const a={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(t)],d=Fe(e,a);return["scroll","auto","overlay"].some(n=>d.includes(n))},mt=(e,t)=>{if(!he)return;let a=e;for(;a;){if([window,document,document.documentElement].includes(a))return window;if(vt(a,t))return a;a=a.parentNode}return a},we="update:modelValue",Se=e=>e,J=Symbol("tabsRootContextKey"),pt=Y({tabs:{type:le(Array),default:()=>Se([])}}),Ce="ElTabBar",_t=z({name:Ce}),ht=z({..._t,props:pt,setup(e,{expose:t}){const a=e,d=G(),n=re(J);n||X(Ce,"<el-tabs><el-tab-bar /></el-tabs>");const s=j("tabs"),r=h(),g=h(),c=()=>{let o=0,m=0;const v=["top","bottom"].includes(n.props.tabPosition)?"width":"height",i=v==="width"?"x":"y",w=i==="x"?"left":"top";return a.tabs.every(S=>{var N,l;const T=(l=(N=d.parent)==null?void 0:N.refs)==null?void 0:l[`tab-${S.uid}`];if(!T)return!1;if(!S.active)return!0;o=T[`offset${A(w)}`],m=T[`client${A(v)}`];const C=window.getComputedStyle(T);return v==="width"&&(a.tabs.length>1&&(m-=Number.parseFloat(C.paddingLeft)+Number.parseFloat(C.paddingRight)),o+=Number.parseFloat(C.paddingLeft)),!1}),{[v]:`${m}px`,transform:`translate${A(i)}(${o}px)`}},f=()=>g.value=c();return R(()=>a.tabs,async()=>{await M(),f()},{immediate:!0}),ge(r,()=>f()),t({ref:r,update:f}),(o,m)=>(L(),D("div",{ref_key:"barRef",ref:r,class:ye([O(s).e("active-bar"),O(s).is(O(n).props.tabPosition)]),style:Ie(g.value)},null,6))}});var gt=Ne(ht,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const yt=Y({panes:{type:le(Array),default:()=>Se([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Nt={tabClick:(e,t,a)=>a instanceof Event,tabRemove:(e,t)=>t instanceof Event},_e="ElTabNav",Tt=z({name:_e,props:yt,emits:Nt,setup(e,{expose:t,emit:a}){const d=G(),n=re(J);n||X(_e,"<el-tabs><tab-nav /></el-tabs>");const s=j("tabs"),r=Le(),g=ze(),c=h(),f=h(),o=h(),m=h(),v=h(!1),i=h(0),w=h(!1),S=h(!0),N=H(()=>["top","bottom"].includes(n.props.tabPosition)?"width":"height"),l=H(()=>({transform:`translate${N.value==="width"?"X":"Y"}(-${i.value}px)`})),T=()=>{if(!c.value)return;const p=c.value[`offset${A(N.value)}`],_=i.value;if(!_)return;const u=_>p?_-p:0;i.value=u},C=()=>{if(!c.value||!f.value)return;const p=f.value[`offset${A(N.value)}`],_=c.value[`offset${A(N.value)}`],u=i.value;if(p-u<=_)return;const P=p-u>_*2?u+_:p-_;i.value=P},F=async()=>{const p=f.value;if(!v.value||!o.value||!c.value||!p)return;await M();const _=o.value.querySelector(".is-active");if(!_)return;const u=c.value,P=["top","bottom"].includes(n.props.tabPosition),$=_.getBoundingClientRect(),E=u.getBoundingClientRect(),k=P?p.offsetWidth-E.width:p.offsetHeight-E.height,x=i.value;let y=x;P?($.left<E.left&&(y=x-(E.left-$.left)),$.right>E.right&&(y=x+$.right-E.right)):($.top<E.top&&(y=x-(E.top-$.top)),$.bottom>E.bottom&&(y=x+($.bottom-E.bottom))),y=Math.max(y,0),i.value=Math.min(y,k)},U=()=>{var p;if(!f.value||!c.value)return;e.stretch&&((p=m.value)==null||p.update());const _=f.value[`offset${A(N.value)}`],u=c.value[`offset${A(N.value)}`],P=i.value;u<_?(v.value=v.value||{},v.value.prev=P,v.value.next=P+u<_,_-P<u&&(i.value=_-u)):(v.value=!1,P>0&&(i.value=0))},Be=p=>{const _=p.code,{up:u,down:P,left:$,right:E}=q;if(![u,P,$,E].includes(_))return;const k=Array.from(p.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),x=k.indexOf(p.target);let y;_===$||_===u?x===0?y=k.length-1:y=x-1:x<k.length-1?y=x+1:y=0,k[y].focus({preventScroll:!0}),k[y].click(),ce()},ce=()=>{S.value&&(w.value=!0)},Q=()=>w.value=!1;return R(r,p=>{p==="hidden"?S.value=!1:p==="visible"&&setTimeout(()=>S.value=!0,50)}),R(g,p=>{p?setTimeout(()=>S.value=!0,50):S.value=!1}),ge(o,U),W(()=>setTimeout(()=>F(),0)),Ve(()=>U()),t({scrollToActiveTab:F,removeFocus:Q}),R(()=>e.panes,()=>d.update(),{flush:"post",deep:!0}),()=>{const p=v.value?[b("span",{class:[s.e("nav-prev"),s.is("disabled",!v.value.prev)],onClick:T},[b(K,null,{default:()=>[b(De,null,null)]})]),b("span",{class:[s.e("nav-next"),s.is("disabled",!v.value.next)],onClick:C},[b(K,null,{default:()=>[b(Me,null,null)]})])]:null,_=e.panes.map((u,P)=>{var $,E,k,x;const y=u.uid,Z=u.props.disabled,ee=(E=($=u.props.name)!=null?$:u.index)!=null?E:`${P}`,te=!Z&&(u.isClosable||e.editable);u.index=`${P}`;const ke=te?b(K,{class:"is-icon-close",onClick:I=>a("tabRemove",u,I)},{default:()=>[b(He,null,null)]}):null,Oe=((x=(k=u.slots).label)==null?void 0:x.call(k))||u.props.label,Ae=!Z&&u.active?0:-1;return b("div",{ref:`tab-${y}`,class:[s.e("item"),s.is(n.props.tabPosition),s.is("active",u.active),s.is("disabled",Z),s.is("closable",te),s.is("focus",w.value)],id:`tab-${ee}`,key:`tab-${y}`,"aria-controls":`pane-${ee}`,role:"tab","aria-selected":u.active,tabindex:Ae,onFocus:()=>ce(),onBlur:()=>Q(),onClick:I=>{Q(),a("tabClick",u,ee,I)},onKeydown:I=>{te&&(I.code===q.delete||I.code===q.backspace)&&a("tabRemove",u,I)}},[Oe,ke])});return b("div",{ref:o,class:[s.e("nav-wrap"),s.is("scrollable",!!v.value),s.is(n.props.tabPosition)]},[p,b("div",{class:s.e("nav-scroll"),ref:c},[b("div",{class:[s.e("nav"),s.is(n.props.tabPosition),s.is("stretch",e.stretch&&["top","bottom"].includes(n.props.tabPosition))],ref:f,style:l.value,role:"tablist",onKeydown:Be},[e.type?null:b(gt,{ref:m,tabs:[...e.panes]},null),_])])])}}}),Et=Y({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:le(Function),default:()=>!0},stretch:Boolean}),se=e=>We(e)||Ye(e),wt={[we]:e=>se(e),tabClick:(e,t)=>t instanceof Event,tabChange:e=>se(e),edit:(e,t)=>["remove","add"].includes(t),tabRemove:e=>se(e),tabAdd:()=>!0};var St=z({name:"ElTabs",props:Et,emits:wt,setup(e,{emit:t,slots:a,expose:d}){var n,s;const r=j("tabs"),{children:g,addChild:c,removeChild:f}=ut(G(),"ElTabPane"),o=h(),m=h((s=(n=e.modelValue)!=null?n:e.activeName)!=null?s:"0"),v=l=>{m.value=l,t(we,l),t("tabChange",l)},i=async l=>{var T,C,F;if(!(m.value===l||ue(l)))try{await((T=e.beforeLeave)==null?void 0:T.call(e,l,m.value))!==!1&&(v(l),(F=(C=o.value)==null?void 0:C.removeFocus)==null||F.call(C))}catch{}},w=(l,T,C)=>{l.props.disabled||(i(T),t("tabClick",l,C))},S=(l,T)=>{l.props.disabled||ue(l.props.name)||(T.stopPropagation(),t("edit",l.props.name,"remove"),t("tabRemove",l.props.name))},N=()=>{t("edit",void 0,"add"),t("tabAdd")};return Ue({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},H(()=>!!e.activeName)),R(()=>e.activeName,l=>i(l)),R(()=>e.modelValue,l=>i(l)),R(m,async()=>{var l;await M(),(l=o.value)==null||l.scrollToActiveTab()}),Ke(J,{props:e,currentName:m,registerPane:c,unregisterPane:f}),d({currentName:m}),()=>{const l=e.editable||e.addable?b("span",{class:r.e("new-tab"),tabindex:"0",onClick:N,onKeydown:F=>{F.code===q.enter&&N()}},[b(K,{class:r.is("icon-plus")},{default:()=>[b(qe,null,null)]})]):null,T=b("div",{class:[r.e("header"),r.is(e.tabPosition)]},[l,b(Tt,{ref:o,currentName:m.value,editable:e.editable,type:e.type,panes:g.value,stretch:e.stretch,onTabClick:w,onTabRemove:S},null)]),C=b("div",{class:r.e("content")},[Te(a,"default")]);return b("div",{class:[r.b(),r.m(e.tabPosition),{[r.m("card")]:e.type==="card",[r.m("border-card")]:e.type==="border-card"}]},[...e.tabPosition!=="bottom"?[T,C]:[C,T]])}}});const Ct=Y({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),Pt=["id","aria-hidden","aria-labelledby"],Pe="ElTabPane",$t=z({name:Pe}),xt=z({...$t,props:Ct,setup(e){const t=e,a=G(),d=je(),n=re(J);n||X(Pe,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const s=j("tab-pane"),r=h(),g=H(()=>t.closable||n.props.closable),c=de(()=>{var i;return n.currentName.value===((i=t.name)!=null?i:r.value)}),f=h(c.value),o=H(()=>{var i;return(i=t.name)!=null?i:r.value}),m=de(()=>!t.lazy||f.value||c.value);R(c,i=>{i&&(f.value=!0)});const v=Ge({uid:a.uid,slots:d,props:t,paneName:o,active:c,index:r,isClosable:g});return W(()=>{n.registerPane(v)}),Xe(()=>{n.unregisterPane(v.uid)}),(i,w)=>O(m)?Ee((L(),D("div",{key:0,id:`pane-${O(o)}`,class:ye(O(s).b()),role:"tabpanel","aria-hidden":!O(c),"aria-labelledby":`tab-${O(o)}`},[Te(i.$slots,"default")],10,Pt)),[[Je,O(c)]]):Qe("v-if",!0)}});var $e=Ne(xt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const Bt=Ze(St,{TabPane:$e}),kt=et($e),B="ElInfiniteScroll",Ot=50,At=200,Rt=0,Ft={delay:{type:Number,default:At},distance:{type:Number,default:Rt},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},ie=(e,t)=>Object.entries(Ft).reduce((a,[d,n])=>{var s,r;const{type:g,default:c}=n,f=e.getAttribute(`infinite-scroll-${d}`);let o=(r=(s=t[f])!=null?s:f)!=null?r:c;return o=o==="false"?!1:o,o=g(o),a[d]=Number.isNaN(o)?c:o,a},{}),xe=e=>{const{observer:t}=e[B];t&&(t.disconnect(),delete e[B].observer)},It=(e,t)=>{const{container:a,containerEl:d,instance:n,observer:s,lastScrollTop:r}=e[B],{disabled:g,distance:c}=ie(e,n),{clientHeight:f,scrollHeight:o,scrollTop:m}=d,v=m-r;if(e[B].lastScrollTop=m,s||g||v<0)return;let i=!1;if(a===e)i=o-(f+m)<=c;else{const{clientTop:w,scrollHeight:S}=e,N=bt(e,d);i=m+f>=N+w+S-c}i&&t.call(n)};function ne(e,t){const{containerEl:a,instance:d}=e[B],{disabled:n}=ie(e,d);n||a.clientHeight===0||(a.scrollHeight<=a.clientHeight?t.call(d):xe(e))}const Lt={async mounted(e,t){const{instance:a,value:d}=t;tt(d)||X(B,"'v-infinite-scroll' binding value must be a function"),await M();const{delay:n,immediate:s}=ie(e,a),r=mt(e,!0),g=r===window?document.documentElement:r,c=me(It.bind(null,e,d),n);if(r){if(e[B]={instance:a,container:r,containerEl:g,delay:n,cb:d,onScroll:c,lastScrollTop:g.scrollTop},s){const f=new MutationObserver(me(ne.bind(null,e,d),Ot));e[B].observer=f,f.observe(e,{childList:!0,subtree:!0}),ne(e,d)}r.addEventListener("scroll",c)}},unmounted(e){const{container:t,onScroll:a}=e[B];t==null||t.removeEventListener("scroll",a),xe(e)},async updated(e){if(!e[B])await M();else{const{containerEl:t,cb:a,observer:d}=e[B];t.clientHeight&&d&&ne(e,a)}}},oe=Lt;oe.install=e=>{e.directive("InfiniteScroll",oe)};const zt=oe;const Vt={class:"container"},Dt={class:"bread-container"},Mt=["infinite-scroll-disabled"],Ht={class:"body"},Ut={__name:"index",setup(e){const t=st(),a=h([]),d=async()=>{const o=await ct(t.params.id);a.value=o.result};W(()=>{d()});const n=h([]),s=h({categoryId:t.params.id,page:1,pageSize:20,sortField:"publishTime"}),r=async()=>{const o=await ve(s.value);n.value=o.result.items};W(()=>{r()});const g=()=>{s.value.page=1,r()},c=h(!1),f=async()=>{console.log("加载更多了"),s.value.page++;const o=await ve(s.value);if(o.result.items.length!=0){n.value=[...n.value,...o.result.items];return}c.value=!0};return(o,m)=>{const v=it,i=rt,w=kt,S=Bt,N=zt;return L(),D("div",Vt,[be("div",Dt,[b(i,{separator:">"},{default:V(()=>[b(v,{to:{path:"/"}},{default:V(()=>[ae("首页")]),_:1}),b(v,{to:{path:`/category/${a.value.parentId}`}},{default:V(()=>[ae(fe(a.value.parentName),1)]),_:1},8,["to"]),b(v,null,{default:V(()=>[ae(fe(a.value.name),1)]),_:1})]),_:1})]),Ee((L(),D("div",{class:"sub-container","infinite-scroll-disabled":c.value},[b(S,{modelValue:s.value.sortField,"onUpdate:modelValue":m[0]||(m[0]=l=>s.value.sortField=l),onTabChange:g},{default:V(()=>[b(w,{label:"最新商品",name:"publishTime"}),b(w,{label:"最高人气",name:"orderNum"}),b(w,{label:"评论最多",name:"evaluateNum"})]),_:1},8,["modelValue"]),be("div",Ht,[(L(!0),D(nt,null,ot(n.value,l=>(L(),lt(dt,{key:l.id,goods:l},null,8,["goods"]))),128))])],8,Mt)),[[N,f]])])}}},jt=at(Ut,[["__scopeId","data-v-005fd0c2"]]);export{jt as default};
